# Example: Custom Kafka to Redpanda Cloud (Cloud Deployment with Secrets)
# Use case: Migration with Redpanda Connect deployed to Redpanda Cloud
# Source: Custom Kafka cluster (on-premises or other cloud)
# Destination: Redpanda Cloud Dedicated
# Deployment: Redpanda Cloud (requires secrets)
# Scope: Data, schemas, and consumer offsets
#
# IMPORTANT: This configuration uses environment variable secrets (${SECRET_NAME})
# which must be created in Redpanda Cloud Console before deployment.
#
# Required secrets to create:
# - KAFKA_BROKERS: Custom Kafka bootstrap brokers
# - KAFKA_USER: Kafka SASL username
# - KAFKA_USER_PWD: Kafka SASL password
# - REDPANDA_BROKERS: Redpanda Cloud seed brokers
# - REDPANDA_USER: Redpanda Cloud username
# - REDPANDA_USER_PWD: Redpanda Cloud password
#
# Documentation: https://docs.redpanda.com/redpanda-cloud/develop/connect/configuration/secret-management/

http:
  enabled: false

logger:
  level: DEBUG

input:
  redpanda_migrator:
    # Use secret for custom Kafka brokers
    seed_brokers: ["${KAFKA_BROKERS}"]
    
    topics: ["hello.*"]
    regexp_topics: true
    
    consumer_group: "migration_test_v3"
    
    metadata_max_age: 30s
    
    # Custom Kafka authentication
    tls:
      enabled: true
    
    sasl:
      - mechanism: "SCRAM-SHA-512"
        username: "${KAFKA_USER}"        # Use secret for Kafka username
        password: "${KAFKA_USER_PWD}"    # Use secret for Kafka password
    
    # Optional: Schema Registry
    schema_registry:
      url: "http://kafka-schema-registry:8081"

output:
  redpanda_migrator:
    # Use secret for Redpanda Cloud brokers
    seed_brokers: ["${REDPANDA_BROKERS}"]
    
    # Consumer offset translation
    consumer_groups:
      interval: 10s
    
    # Redpanda Cloud authentication
    tls:
      enabled: true
    
    sasl:
      - mechanism: "SCRAM-SHA-256"
        username: "${REDPANDA_USER}"      # Use secret for Redpanda username
        password: "${REDPANDA_USER_PWD}"  # Use secret for Redpanda password
    
    # Optional: Schema Registry with full version migration
    schema_registry:
      url: "https://schema-registry.cloud.redpanda.com"
      enabled: true
      versions: all
      normalize: true

# Prometheus metrics for monitoring
metrics:
  prometheus: {}
