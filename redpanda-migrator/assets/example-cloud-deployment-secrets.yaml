# Example: Confluent Cloud to Redpanda Cloud (Cloud Deployment with Secrets)
# Use case: Migration with Redpanda Connect deployed to Redpanda Cloud
# Source: Confluent Cloud
# Destination: Redpanda Cloud Dedicated
# Deployment: Redpanda Cloud (requires secrets)
# Scope: Data, schemas, and consumer offsets
# 
# IMPORTANT: This configuration uses environment variable secrets (${SECRET_NAME})
# which must be created in Redpanda Cloud Console before deployment.
#
# Required secrets to create:
# - CC_BROKERS: Confluent Cloud bootstrap brokers
# - CC_USER: Confluent Cloud API key
# - CC_USER_PWD: Confluent Cloud API secret
# - REDPANDA_BROKERS: Redpanda Cloud seed brokers
# - REDPANDA_USER: Redpanda Cloud username
# - REDPANDA_USER_PWD: Redpanda Cloud password
#
# Documentation: https://docs.redpanda.com/redpanda-cloud/develop/connect/configuration/secret-management/

http:
  enabled: false

logger:
  level: INFO

input:
  redpanda_migrator:
    # Use secret for Confluent Cloud brokers
    seed_brokers: ["${CC_BROKERS}"]
    
    topics: ["orders.*", "users.*", "payments.*"]
    regexp_topics: true
    
    consumer_group: "confluent_to_redpanda_cloud"
    
    metadata_max_age: 30s
    
    # Confluent Cloud requires PLAIN mechanism and TLS renegotiation
    sasl:
      - mechanism: "PLAIN"
        username: "${CC_USER}"       # Use secret for API key
        password: "${CC_USER_PWD}"   # Use secret for API secret
    
    tls:
      enabled: true
      enable_renegotiation: true
    
    # Optional: Schema Registry with secrets
    schema_registry:
      url: "https://psrc-abc123.us-east-1.aws.confluent.cloud"
      basic_auth:
        enabled: true
        username: "${CC_SR_KEY}"
        password: "${CC_SR_SECRET}"

output:
  redpanda_migrator:
    # Use secret for Redpanda Cloud brokers
    seed_brokers: ["${REDPANDA_BROKERS}"]
    
    # Consumer offset translation with fast sync
    consumer_groups:
      interval: 10s
    
    # Redpanda Cloud authentication
    sasl:
      - mechanism: "SCRAM-SHA-256"
        username: "${REDPANDA_USER}"      # Use secret for username
        password: "${REDPANDA_USER_PWD}"  # Use secret for password
    
    tls:
      enabled: true
    
    # Optional: Schema Registry with secrets
    schema_registry:
      url: "https://schema-registry.cloud.redpanda.com"
      enabled: true
      versions: all
      interval: 10s
      basic_auth:
        enabled: true
        username: "${REDPANDA_SR_USER}"
        password: "${REDPANDA_SR_PWD}"

# Prometheus metrics for monitoring
metrics:
  prometheus: {}
